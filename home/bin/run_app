#!/usr/bin/env bash

check_and_launch() {
    [ -z "$(pgrep -f "$1" )" ] && "$2" &
}

apps=(
    alacritty 
    firefox 
    slack 
    spotify 
    flameshot 
    obsidian 
    discord 
    inkscape 
    zoom
    openbroadcastsoftware
)
available_apps=$(printf "%s\n" "${apps[@]}")

selected_app="$(echo -e "$available_apps" | dmenu -c -l 7 -bw 2)"

case "$selected_app" in
    "firefox")
        check_and_launch firefox firefox
        qtile cmd-obj -o group r -f toscreen
        ;;
    "slack")
        check_and_launch slack slack
        qtile cmd-obj -o group o -f toscreen
        ;;
    "spotify")
        check_and_launch spotify-launcher spotify-launcher
        qtile cmd-obj -o group v -f toscreen
        ;;
    "obsidian")
        check_and_launch obsidian obsidian
        qtile cmd-obj -o group n -f toscreen
        ;;
    "flameshot")
        check_and_launch flameshot flameshot
        ;;
    "inkscape")
        inkscape &
        ;;
    "discord")
        check_and_launch discord discord
        qtile cmd-obj -o group o -f toscreen
        ;;
    "openbroadcastsoftware")
       obs & # this is longer than the app so obsidian can be prioritized
        ;;
    "alacritty")
        check_and_launch alacritty alacritty
       qtile cmd-obj -o group i -f toscreen
        ;;
    "zoom")
       zoom &
       qtile cmd-obj -o group o -f toscreen
        ;;
esac
